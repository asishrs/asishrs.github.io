<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Automate your GitHub Pages Deployment using Hugo and Actions - Asish Soudhamma</title><meta name=Description content="LoveIt Theme Demo"><meta property="og:title" content="Automate your GitHub Pages Deployment using Hugo and Actions"><meta property="og:description" content="I am a fan of Hugo for building static websites and blogs. It is very easy to set up Hugo and start building webpages using markdown. If you want to add some serious customizations to your pages you can achieve that using shortcodes. You have access to thousands of themes which makes bootstrapping easy.
In this article, I am going to show how you can automate the build and deployment of GitHub Pages using Hugo and GitHub Actions."><meta property="og:type" content="article"><meta property="og:url" content="https://asishrs.com/2020/02/hugo-githubactions/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-04T21:08:57-07:00"><meta property="article:modified_time" content="2020-02-04T21:08:57-07:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automate your GitHub Pages Deployment using Hugo and Actions"><meta name=twitter:description content="I am a fan of Hugo for building static websites and blogs. It is very easy to set up Hugo and start building webpages using markdown. If you want to add some serious customizations to your pages you can achieve that using shortcodes. You have access to thousands of themes which makes bootstrapping easy.
In this article, I am going to show how you can automate the build and deployment of GitHub Pages using Hugo and GitHub Actions."><meta name=application-name content="Asish Soudhamma"><meta name=apple-mobile-web-app-title content="Asish Soudhamma"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://asishrs.com/2020/02/hugo-githubactions/><link rel=prev href=https://asishrs.com/2020/02/aws-lambda-cloudformation/><link rel=next href=https://asishrs.com/2020/09/proxyless-grpc/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Automate your GitHub Pages Deployment using Hugo and Actions","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/asishrs.com\/2020\/02\/hugo-githubactions\/"},"genre":"posts","keywords":"hugo, blog, github, automation","wordcount":643,"url":"https:\/\/asishrs.com\/2020\/02\/hugo-githubactions\/","datePublished":"2020-02-04T21:08:57-07:00","dateModified":"2020-02-04T21:08:57-07:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Asish Soudhamma"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Asish Soudhamma"><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts>Posts </a><a class=menu-item href=/tags>Tags </a><a class=menu-item href=/categories>Categories </a><a class=menu-item href=/about>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Asish Soudhamma"><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts title>Posts</a><a class=menu-item href=/tags title>Tags</a><a class=menu-item href=/categories title>Categories</a><a class=menu-item href=/about title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Automate your GitHub Pages Deployment using Hugo and Actions</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Asish Soudhamma</a></span>&nbsp;<span class=post-category>included in <a href=/categories/documentation/><i class="far fa-folder fa-fw" aria-hidden=true></i>Documentation</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-02-04>2020-02-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;643 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=content id=content><img class="cp t u fz ak" src=/images/posts/hugo-actions/hugo-actions.png role=presentation><p>I am a fan of <a href=https://gohugo.io/ target=_blank rel="noopener noreffer">Hugo</a> for building static websites and blogs. It is very easy to set up Hugo and start building webpages using markdown. If you want to add some serious customizations to your pages you can achieve that using <a href=https://gohugo.io/content-management/shortcodes/ target=_blank rel="noopener noreffer">shortcodes</a>. You have access to thousands of <a href=https://themes.gohugo.io/ target=_blank rel="noopener noreffer">themes</a> which makes bootstrapping easy.</p><p>In this article, I am going to show how you can automate the build and deployment of GitHub Pages using Hugo and <a href=https://github.com/features/actions target=_blank rel="noopener noreffer">GitHub Actions</a>. Creating a <a href=https://gohugo.io/getting-started/quick-start/ target=_blank rel="noopener noreffer">Hugo website</a> and setting up a <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">GitHub page</a> is out of scope for this article.</p><p>For building and publishing the website, I am going to use <a href=https://github.com/peaceiris/actions-gh-pages target=_blank rel="noopener noreffer">actions-gh-pages</a>.</p><p>There are two different ways to set up the deployment process.</p><h2 id=use-single-repository>Use Single Repository</h2><p>In this case, you are keeping the Hugo source code and generated Hugo site in the same repository configured for GitHub pages. The <em>Hugo</em> <em>source</em> contains all the files that written (or updated) by you for generating the site and <em>generated Hugo site</em> is the contents inside <code>public</code> directory. In order to do this, you will have a dedicated branch in your repository (example <code>develop</code> ) contains the source and you will be storing the <code>public</code> directory contents in a different branch. Please note, in the case of personal repositories you have to keep the GitHub page files in <code>master</code> branch.</p><p><strong>Pros:</strong> Less maintenance, as you can manage everything from a single repository.</p><p><strong>Cons:</strong> This means you will have to manage entirely different contents between your source branch and the GitHub pages branch.</p><h2 id=use-multiple-repositories>Use Multiple Repositories</h2><p>In this case, you are keeping the <em>Hugo source</em> in a dedicated repository and <em>generated Hugo site</em> contents inside <code>public</code> directory in a different repository configured with GitHub pages.</p><p><strong>Pros:</strong> Much cleaner approach and align well with the git branching strategies.</p><p><strong>Cons:</strong> Additional work to set up and configure two repositories.</p><p>I am going to use the <em>multiple repositories</em> set up with personal GitHub pages in this article.</p><h2 id=prerequisites>Prerequisites:</h2><ul><li>Create and configure a repository for <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">GitHub page</a></li><li>Create an additional repository for Hugo source files.</li><li>Build a sample Hugo site. For testing the set up you can use a sample Hugo site like <a href=https://github.com/matcornic/hugo-theme-learn target=_blank rel="noopener noreffer">this</a> (check the <code>exampleSite</code> )</li><li>Test your Hugo site using <code>hugo server -D</code></li></ul><h2 id=configure-github-actions>Configure GitHub Actions</h2><p>You need to set up keys on the above repositories to enable publish.</p><ol><li>Generate your deploy key with the following command.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ssh-keygen -t rsa -b 4096 -C &#34;$(git config user.email)&#34; -f master -N &#34;&#34;
</span></span><span class=line><span class=cl>\# You will get 2 files:
</span></span><span class=line><span class=cl>\#   master.pub (public key)
</span></span><span class=line><span class=cl>\#   master     (private key)
</span></span></code></pre></td></tr></table></div></div><p>2. Add your <em>private key</em> as a <em>secret</em> with name ACTIONS_DEPLOY_KEY in the Hugo Source Repository.</p><p>Navigate to <em>Your Hugo Source Repository > Settings > Secrets > Add new secrets</em> and the name the secret as ACTIONS_DEPLOY_KEY and paste the contents of <code>master</code> file in the value.</p><p>3. Add your <em>public key</em> as <em>deployment key</em> in the GitHub pages repository</p><p>Navigate to <em>Your GitHub pages Repository > Settings > Deploy Key> Add new deploy key</em> and set title something you can relate to the private key (like Public Key for my site deploy) and paste the contents of <code>master.pub</code> file in the value.</p><p>4. Add below file <code>.github/workflows/pages.yml</code> location of your Hugo source code and replace <em>username/external-repository</em> with your GitHub username and GitHub pages repository name.</p><p>5. Commit your Hugo source code repository changes and push to GitHub. If you are using any branch other than <code>master</code> , you need to merge the changes to master for the workflow to start. You can change that setting in <em>on:push:branches</em> part of the workflow file.</p><p>6. Check the workflow in the Actions tab of your Hugo Source repository.</p><p>Once your workflow completed, you can see new commits on the GitHub pages repository <code>master</code> branch and in few minutes the changes will appear on your GitHub page URL.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-02-04</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://asishrs.com/2020/02/hugo-githubactions/ data-title="Automate your GitHub Pages Deployment using Hugo and Actions" data-via=asishrs data-hashtags=hugo,blog,github,automation><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://asishrs.com/2020/02/hugo-githubactions/ data-hashtag=hugo><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://asishrs.com/2020/02/hugo-githubactions/ data-title="Automate your GitHub Pages Deployment using Hugo and Actions"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://asishrs.com/2020/02/hugo-githubactions/ data-title="Automate your GitHub Pages Deployment using Hugo and Actions"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://asishrs.com/2020/02/hugo-githubactions/ data-title="Automate your GitHub Pages Deployment using Hugo and Actions"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/hugo/>hugo</a>,&nbsp;<a href=/tags/blog/>blog</a>,&nbsp;<a href=/tags/github/>github</a>,&nbsp;<a href=/tags/automation/>automation</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2020/02/aws-lambda-cloudformation/ class=prev rel=prev title="Automated and Authenticated APIs stack using Lambda, API Gateway and Cloudformation (AWS)"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Automated and Authenticated APIs stack using Lambda, API Gateway and Cloudformation (AWS)</a>
<a href=/2020/09/proxyless-grpc/ class=next rel=next title="Proxyless gRPC load balancing in Kubernetes">Proxyless gRPC load balancing in Kubernetes<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Asish Soudhamma</a></span>&nbsp;|&nbsp;<span class=license>MIT</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},data:{"id-1":"⌂","id-2":"⌂"},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>