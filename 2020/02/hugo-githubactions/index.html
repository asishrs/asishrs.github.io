<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Automate your GitHub Pages Deployment using Hugo and Actions | Asish Soudhamma</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="LoveIt Theme Demo"><link rel=prev href=https://asishrs.com/2020/02/aws-lambda-cloudformation/><link rel=canonical href=https://asishrs.com/2020/02/hugo-githubactions/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automate your GitHub Pages Deployment using Hugo and Actions"><meta name=twitter:description content="I am a fan of Hugo for building static websites and blogs. It is very easy to set up Hugo and start building webpages using markdown. If you want to add some serious customizations to your pages you can achieve that using shortcodes. You have access to thousands of themes which makes bootstrapping easy.
In this article, I am going to show how you can automate the build and deployment of GitHub Pages using Hugo and GitHub Actions."><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Automate your GitHub Pages Deployment using Hugo and Actions","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/asishrs.com\/2020\/02\/hugo-githubactions\/"},"image":{"@type":"ImageObject","url":"https:\/\/asishrs.com\/cover.png","width":800,"height":600},"genre":"posts","keywords":"hugo, blog, github, automation","wordcount":643,"url":"https:\/\/asishrs.com\/2020\/02\/hugo-githubactions\/","datePublished":"2020-02-04T21:08:57-07:00","dateModified":"2020-02-04T21:08:57-07:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"XXXX","logo":{"@type":"ImageObject","url":"https:\/\/asishrs.com\/logo.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.min.css><link rel=stylesheet href=/css/lib/animate/animate.min.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=navbar-container><div class="navbar-header animated bounceIn"><a href=https://asishrs.com/>Asish Soudhamma</a></div><div class=navbar-menu><a class=menu-item href=https://asishrs.com/posts>Posts</a>
<a class=menu-item href=https://asishrs.com/tags>Tags</a>
<a class=menu-item href=https://asishrs.com/categories>Categories</a>
<a class=menu-item href=https://asishrs.com/about>About</a>
<a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><nav class=navbar-mobile><div class=navbar-container><div class=navbar-header><div class="navbar-header-title animated bounceIn"><a href=https://asishrs.com/>Asish Soudhamma</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://asishrs.com/posts>Posts</a>
<a class=menu-item href=https://asishrs.com/tags>Tags</a>
<a class=menu-item href=https://asishrs.com/categories>Categories</a>
<a class=menu-item href=https://asishrs.com/about>About</a>
<a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a></div></div></nav><main class=main><div class=container><article class=post-warp><h1 class="post-title animated flipInX">Automate your GitHub Pages Deployment using Hugo and Actions</h1><div class=post-meta><div class=post-meta-main><a class=author href=https://asishrs.com/ rel=author><i class="fas fa-user-circle fa-fw"></i>Asish Soudhamma&nbsp;</a>
<span class=post-category>included in
<i class="far fa-folder fa-fw"></i><a href=https://asishrs.com/categories/documentation/>Documentation</a></span></div><div class=post-meta-other><i class="far fa-calendar-alt fa-fw"></i><time datetime=2020-02-04>2020-02-04</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 643 words&nbsp;
<i class="far fa-clock fa-fw"></i>4 min&nbsp;</div></div><div class=post-content><p><img class="cp t u fz ak" src=/images/posts/hugo-actions/hugo-actions.png width=3921 height=2185 role=presentation></p><p>I am a fan of <a href=https://gohugo.io/>Hugo</a> for building static websites and blogs. It is very easy to set up Hugo and start building webpages using markdown. If you want to add some serious customizations to your pages you can achieve that using <a href=https://gohugo.io/content-management/shortcodes/>shortcodes</a>. You have access to thousands of <a href=https://themes.gohugo.io/>themes</a> which makes bootstrapping easy.</p><p>In this article, I am going to show how you can automate the build and deployment of GitHub Pages using Hugo and <a href=https://github.com/features/actions>GitHub Actions</a>. Creating a <a href=https://gohugo.io/getting-started/quick-start/>Hugo website</a> and setting up a <a href=https://pages.github.com/>GitHub page</a> is out of scope for this article.</p><p>For building and publishing the website, I am going to use <a href=https://github.com/peaceiris/actions-gh-pages>actions-gh-pages</a>.</p><p>There are two different ways to set up the deployment process.</p><a class=post-dummy-target id=use-single-repository></a><h2>Use Single Repository</h2><p>In this case, you are keeping the Hugo source code and generated Hugo site in the same repository configured for GitHub pages. The <em>Hugo</em> <em>source</em> contains all the files that written (or updated) by you for generating the site and <em>generated Hugo site</em> is the contents inside <code>public</code> directory. In order to do this, you will have a dedicated branch in your repository (example <code>develop</code> ) contains the source and you will be storing the <code>public</code> directory contents in a different branch. Please note, in the case of personal repositories you have to keep the GitHub page files in <code>master</code> branch.</p><p><strong>Pros:</strong> Less maintenance, as you can manage everything from a single repository.</p><p><strong>Cons:</strong> This means you will have to manage entirely different contents between your source branch and the GitHub pages branch.</p><a class=post-dummy-target id=use-multiple-repositories></a><h2>Use Multiple Repositories</h2><p>In this case, you are keeping the <em>Hugo source</em> in a dedicated repository and <em>generated Hugo site</em> contents inside <code>public</code> directory in a different repository configured with GitHub pages.</p><p><strong>Pros:</strong> Much cleaner approach and align well with the git branching strategies.</p><p><strong>Cons:</strong> Additional work to set up and configure two repositories.</p><p>I am going to use the <em>multiple repositories</em> set up with personal GitHub pages in this article.</p><a class=post-dummy-target id=prerequisites></a><h2>Prerequisites:</h2><ul><li>Create and configure a repository for <a href=https://pages.github.com/>GitHub page</a></li><li>Create an additional repository for Hugo source files.</li><li>Build a sample Hugo site. For testing the set up you can use a sample Hugo site like <a href=https://github.com/matcornic/hugo-theme-learn>this</a> (check the <code>exampleSite</code> )</li><li>Test your Hugo site using <code>hugo server -D</code></li></ul><a class=post-dummy-target id=configure-github-actions></a><h2>Configure GitHub Actions</h2><p>You need to set up keys on the above repositories to enable publish.</p><ol><li><p>Generate your deploy key with the following command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></pre></td><td class=lntd><pre class=chroma>ssh-keygen -t rsa -b 4096 -C &#34;$(git config user.email)&#34; -f master -N &#34;&#34;
\# You will get 2 files:
\#   master.pub (public key)
\#   master     (private key)</pre></td></tr></table></div></div></li></ol><p>2. Add your <em>private key</em> as a <em>secret</em> with name ACTIONS_DEPLOY_KEY in the Hugo Source Repository.</p><p>Navigate to <em>Your Hugo Source Repository &gt; Settings &gt; Secrets &gt; Add new secrets</em> and the name the secret as ACTIONS_DEPLOY_KEY and paste the contents of <code>master</code> file in the value.</p><p>3. Add your <em>public key</em> as <em>deployment key</em> in the GitHub pages repository</p><p>Navigate to <em>Your GitHub pages Repository &gt; Settings &gt; Deploy Key&gt; Add new deploy key</em> and set title something you can relate to the private key (like Public Key for my site deploy) and paste the contents of <code>master.pub</code> file in the value.</p><p>4. Add below file <code>.github/workflows/pages.yml</code> location of your Hugo source code and replace <em>username/external-repository</em> with your GitHub username and GitHub pages repository name.</p><p>5. Commit your Hugo source code repository changes and push to GitHub. If you are using any branch other than <code>master</code> , you need to merge the changes to master for the workflow to start. You can change that setting in <em>on:push:branches</em> part of the workflow file.</p><p>6. Check the workflow in the Actions tab of your Hugo Source repository.</p><p>Once your workflow completed, you can see new commits on the GitHub pages repository <code>master</code> branch and in few minutes the changes will appear on your GitHub page URL.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>This article is updated with 2020-02-04</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://asishrs.com/2020/02/hugo-githubactions/index.md target=_blank></a></span></div><div class=post-info-share><span><a href="//twitter.com/share?url=https%3a%2f%2fasishrs.com%2f2020%2f02%2fhugo-githubactions%2f&amp;text=Automate%20your%20GitHub%20Pages%20Deployment%20using%20Hugo%20and%20Actions&amp;via=asishrs" target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-fw"></i></a><a href="//reddit.com/submit?url=https%3a%2f%2fasishrs.com%2f2020%2f02%2fhugo-githubactions%2f&amp;title=Automate%20your%20GitHub%20Pages%20Deployment%20using%20Hugo%20and%20Actions" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-fw"></i></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fasishrs.com%2f2020%2f02%2fhugo-githubactions%2f&amp;title=Automate%20your%20GitHub%20Pages%20Deployment%20using%20Hugo%20and%20Actions" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin fa-fw"></i></a></span></div></div></div><div class=post-info-more><section><span class=tag><a href=https://asishrs.com/tags/hugo/><i class="fas fa-tag fa-fw"></i>hugo</a></span>
<span class=tag><a href=https://asishrs.com/tags/blog/><i class="fas fa-tag fa-fw"></i>blog</a></span>
<span class=tag><a href=https://asishrs.com/tags/github/><i class="fas fa-tag fa-fw"></i>github</a></span>
<span class=tag><a href=https://asishrs.com/tags/automation/><i class="fas fa-tag fa-fw"></i>automation</a></span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://asishrs.com/>Home</a></span></section></div><div class=post-nav><a href=https://asishrs.com/2020/02/aws-lambda-cloudformation/ class=prev rel=prev title="Automated and Authenticated APIs stack using Lambda, API Gateway and Cloudformation (AWS)"><i class="fas fa-angle-left fa-fw"></i>Automated and Authenticated APIs stack using Lambda, API Gateway and Cloudformation (AWS)</a></div></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://asishrs.com/>Asish Soudhamma</a></span></div></div></footer><script src=/js/lib/jquery/jquery.slim.min.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><script src=/js/blog.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-78558344-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span></a></body></html>